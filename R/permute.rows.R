permute.rows <- function(x) {

    dd <- dim(x)
    n <- dd[1]
    p <- dd[2]
    mm <- runif(length(x)) + rep(seq(n) * 10, rep(p, n))
        
    return(matrix(t(x)[order(mm)], n, p, byrow=TRUE))
        
}

